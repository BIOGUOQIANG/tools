%\input{E:/Work/tools/latex/glyphtounicode.tex}        % make pdf's searchable CHANGE TO mmap
%% precompile using
%% xelatex -ini -jobname=”preamble” “&xelatex” mylatexformat.ltx “””preamble.tex”””

\usepackage{iftex}
\ifPDFTeX
	\usepackage{inputenx}
	\usepackage[T1]{fontenc}  % better font encoding
	\usepackage[sc]{mathpazo}    % fancy math fonts
\fi

\usepackage{fixltx2e}
\usepackage{graphicx}   % add figures
\usepackage{xcolor} 	 % support for color names
\usepackage{array}
\usepackage{booktabs}    % fancy tables
\usepackage{multirow}
\usepackage{longtable}
\usepackage{subfig}	% add subfigure support
\usepackage{float}	     % stronger placement of floats

\usepackage{ulem}

\usepackage{etoolbox}
\usepackage{parskip}
\usepackage{titlesec}
\usepackage{titletoc}
\usepackage{paralist}
\usepackage{rotating} % allow page rotation
\usepackage{pdflscape} % allow landscape pages in pdf
\usepackage{hyperref}  % hyperlinks in pdf
\usepackage[figure,table]{hypcap} % Correct a problem with hyperref

\usepackage[centering,text={16cm,22cm},dvips]{geometry}
%\usepackage{fancyhdr}
\usepackage{xfrac}
% can't get undertilde to work on TeXLive
%\usepackage{undertilde}
% fixme introduces error
%\usepackage[envlayout=color]{fixme}
\usepackage{bigints}
\usepackage{mathtools} % fixed version of amsmath
\usepackage[warning]{onlyamsmath}
\usepackage{siunitx} % Messes up tables

\usepackage[sort&compress]{natbib} % for bibliography
\usepackage{cleveref}

\usepackage[protrusion=true]{microtype}  % super fancy typography support

\sisetup{
	detect-all = true
}
%% unused stuff
%\usepackage{psfragx}    % for use with LaPrint.m
%\usepackage{fullpage}
%\usepackage{doi}
%\usepackage{uri}

% Line spacing 1.5
\linespread{1.5}

\frenchspacing
\newcommand{\ifundefined}[1]{\expandafter\ifx\csname#1\endcsname\relax}

\hypersetup{
    unicode=true,          % non-Latin characters in Acrobat’s bookmarks
    pdftoolbar=true,        % show Acrobat’s toolbar?
    pdfmenubar=true,        % show Acrobat’s menu?
    pdffitwindow=false,     % window fit to page when opened
    pdfstartview={FitH},    % fits the width of the page to the window
    pdfnewwindow=true,      % links in new window
    colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=red,          % color of internal links
    citecolor=blue,        % color of links to bibliography
    filecolor=magenta,      % color of file links
    urlcolor=blue           % color of external links
}

%\clubpenalty = 10000
%\widowpenalty = 10000
\setlength{\parskip}{1.2ex}
\setlength{\parindent}{0em}

% Here are a few math abbreviations that may be useful. Note that math
% variables should generally be set in italic, vectors in bold italic, and
% constants, such as e and i should be upright. Operators like the 'd' in
% dx  and 'D' in D/Dt should also be upright.
\newcommand{\ir}{\mathrm{i}}
\newcommand{\e}{\, \mathrm{e}} \newcommand{\er}{\mathrm{e}}

% The following makes ODEs and PDEs easier to write.
% For an example, see the second problem below. - Vallis Solution template
\newcommand{\dd}[3][]{{\frac{\dr^{#1} #2}{\dr #3^{#1}}}}
\newcommand{\pp}[3][]{{\frac{\partial^{#1} #2}{\partial #3^{#1}}}}
\newcommand{\DD}[1]{{\frac{\D#1}{\D t}}}
% example: \pp[2]y x

% These are some of my math shortcuts
\newcommand{\mb}[1]{\boldsymbol{#1}} % math bold font
\newcommand{\ol}[1]{\overline{#1}}
\newcommand{\x}{\times}
\newcommand{\mO}{\textnormal{O}}
\newcommand{\ubr}{\underbracket}
\newcommand{\disp}{\displaystyle}
\newcommand{\vb}{\mb {v}\xspace}
\newcommand{\ub}{\mb {u}\xspace}

\DeclareMathOperator{\erf}{erf}

\newcommand{\dr}{\mathop{}\!\mathrm{d}}
\newcommand{\D}{\mathop{}\!\mathrm{D}}

% Text shortcuts
\newcommand{\textbox}[1]{
	\begin{center}
		\framebox{
			\parbox{0.8\linewidth}{#1}
	 	}
	\end{center}
}

% non-dimensional numbers
\newcommand{\Ro}{\textnormal{Ro}}
\newcommand{\Rot}{\textnormal{Ro}_\textnormal{T}}
\newcommand{\Rh}{\textnormal{Rh}}
\newcommand{\Ri}{\textnormal{Ri}}
\newcommand{\Rif}{\Ri_f}
\newcommand{\Pra}{\textnormal{Pr}}
\newcommand{\Pe}{\textnormal{Pe}}
\newcommand{\Ra}{\textnormal{Ra}}
\newcommand{\Rey}{\textnormal{Re}}
\newcommand{\Fr}{\textnormal{Fr}}
\newcommand{\Bu}{\textnormal{Bu}}

\def\preambleloaded{Precompiled preamble loaded.}

\csname endofdump\endcsname

% Example: \dd \psi x + \pp[2]y x  -> dpsi/dx + d2y/dx2

% Bibliography Code
%\bibliographystyle{elsarticle-harv}
%\bibliography{BIBFILENAME WITHOUT EXT}{}
